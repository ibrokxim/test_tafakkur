# –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: API –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ Laravel

–≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è PHP-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏. –ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ **Laravel 10** –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é **Docker**.<br>

# üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
1.–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ Laravel.

2.–í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL.

3.–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é.

4.–ú–æ–¥–µ–ª—å Category –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è: title, description, image.

5.–ú–æ–¥–µ–ª—å Product –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª—è: title, price, image, description.

6.–í –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Elasticsearch ‚Äî –ø—Ä–æ–¥—É–∫—Ç—ã –¥–æ–ª–∂–Ω—ã –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –Ω—ë–º.

7.–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ Elasticsearch.

8.–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ —á–µ—Ä–µ–∑ Docker Compose.


## üß∞ –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–ë—ç–∫–µ–Ω–¥**: PHP 8.1, Laravel 10
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 13
- **–ü–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫**: Elasticsearch 7.17
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT (`tymon/jwt-auth`)
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: Docker, Docker Compose

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

- **Controllers** ‚Äì –ø—Ä–∏—ë–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤
- **Services** ‚Äì –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Repositories** ‚Äì –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ Eloquent –∏ Elasticsearch
- **DTOs** ‚Äì —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö (—Å –ø–æ–º–æ—â—å—é `spatie/laravel-data`)
- **API Resources** ‚Äì —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ API

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

- Docker
- Docker Compose

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

> –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ **WSL 2** (–Ω–∞ Windows) –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <URL-–≤–∞—à–µ–≥–æ-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd <–Ω–∞–∑–≤–∞–Ω–∏–µ-–ø–∞–ø–∫–∏-–ø—Ä–æ–µ–∫—Ç–∞>
```
### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–ª—è Docker Compose):
```bash
cp .env.example .env
 ```
–°–æ–∑–¥–∞–π—Ç–µ .env –≤ –ø–∞–ø–∫–µ src/ (–¥–ª—è Laravel):
```bash
cp src/.env.example src/.env
```
### 3.–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   ```bash
   docker-compose up -d --build
```
### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
   docker-compose exec app composer install
```
### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Laravel
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   ```bash
docker-compose exec app php artisan key:generate
```
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT-—Å–µ–∫—Ä–µ—Ç–∞
```bash
docker-compose exec app php artisan jwt:secret
```
### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   ```bash
   docker-compose exec app php artisan migrate:fresh --seed
   ```
–°–æ–∑–¥–∞—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (10 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ 1000 –ø—Ä–æ–¥—É–∫—Ç–æ–≤).

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Elasticsearch
   –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã.
–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤:
```bash
curl -X PUT "http://localhost:9200/products_index"
```
–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

```bash 
curl -X PUT "http://localhost:9200/categories_index"
```
### 8. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Elasticsearch
   ```bash
   docker-compose exec app php artisan search:reindex
   ```
   –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
   üîó http://localhost:8000/api/

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç Bearer Token –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

```http
Authorization: Bearer <your_jwt_token>
```
üîê 3.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è<br>
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è<br>
URL: POST /auth/register<br>
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: ‚ùå

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

```json
{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "password": "password123"
}
```
–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (201 Created):

```json
{
  "access_token": "eyJ...",
  "token_type": "bearer",
  "expires_in": 3600,
  "user": {
    "id": 1,
    "name": "John Doe",
    "email": "john.doe@example.com",
    "created_at": "...",
    "updated_at": "..."
  }
}
```
üîê –í—Ö–æ–¥
URL: POST /auth/login
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: ‚ùå

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
"email": "john.doe@example.com",
"password": "password123"
}
```
–û—Ç–≤–µ—Ç: —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

üö™ –í—ã—Ö–æ–¥<br>
URL: POST /auth/logout <br>
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: ‚úÖ

–û—Ç–≤–µ—Ç:
```json
{
"message": "Successfully logged out"
}
```
üì¶ 3.2 –ü—Ä–æ–¥—É–∫—Ç—ã
–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

üìÑ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
URL: GET /products
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

page ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

search ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ (—á–µ—Ä–µ–∑ Elasticsearch)

–ü—Ä–∏–º–µ—Ä:

```http
GET /api/products?search=Laptop
```
–û—Ç–≤–µ—Ç:
```json
{
"data": [
    {
        "id": 1,
        "title": "Super Laptop Pro",
        "price": "2500.50",
        "description": "...",
        "image": "...",
        "category": {
        "id": 5,
        "title": "Electronics",
        "description": "...",
        "image": "..."
    }
    }
],
    "links": { ... },
    "meta": { ... }
}
```
‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞<br>
URL: POST /products

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
"title": "New Gadget",
"price": 199.99,
"description": "A very useful gadget.",
"image": "http://example.com/image.png",
"category_id": 1
}
```
–û—Ç–≤–µ—Ç (201 Created): –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞

üîç –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞<br>

URL: GET /products/{id}

‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞<br>
URL: PUT /products/{id} –∏–ª–∏ PATCH /products/{id}

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
"title": "Updated Gadget Name",
"price": 249.99
}
```
‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞<br>
URL: DELETE /products/{id}<br>
–û—Ç–≤–µ—Ç: 204 No Content

üóÇÔ∏è 3.3 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

üìÑ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π<br>
URL: GET /categories<br>

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

search ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

üìå –û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ) —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º.
